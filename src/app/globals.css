@import "tailwindcss";

@custom-variant dark (&:where(.dark, .dark *));

/*
 * Markmap SVG text styling — adapts to light/dark mode.
 * Scoped to [data-markmap] so it doesn't affect button icons etc.
 * Uses high-specificity selectors to beat Markmap's inline styles.
 */

/* ── Dark mode: bright text ── */
.dark svg[data-markmap] *,
.dark svg[data-markmap] foreignObject *,
.dark svg[data-markmap] text,
.dark svg[data-markmap] tspan {
  color: #f3f4f6 !important;
  fill: #f3f4f6 !important;
}

/* ── Light mode: dark text ── */
svg[data-markmap] *,
svg[data-markmap] foreignObject *,
svg[data-markmap] text,
svg[data-markmap] tspan {
  color: #111827 !important;
  fill: #111827 !important;
}

/* Keep lines/paths using their own colors in both modes */
svg[data-markmap] path {
  fill: none !important;
  opacity: 0.7;
}

svg[data-markmap] circle {
  fill: revert !important;
  opacity: 0.9;
}

/* ── New-node highlight: bright flash that demands attention ── */
@keyframes node-flash {
  0% {
    background-color: #facc15;
    box-shadow: 0 0 20px 8px rgba(250, 204, 21, 0.7), 0 0 40px 16px rgba(250, 204, 21, 0.3);
    transform: scale(1.12);
    color: #000 !important;
  }
  8% {
    background-color: #fde047;
    box-shadow: 0 0 14px 6px rgba(250, 204, 21, 0.5), 0 0 28px 10px rgba(250, 204, 21, 0.2);
    transform: scale(1.05);
    color: #000 !important;
  }
  20% {
    background-color: rgba(250, 204, 21, 0.5);
    box-shadow: 0 0 12px 5px rgba(250, 204, 21, 0.35);
    transform: scale(1);
    color: #000 !important;
  }
  50% {
    background-color: rgba(250, 204, 21, 0.3);
    box-shadow: 0 0 8px 3px rgba(250, 204, 21, 0.2);
  }
  80% {
    background-color: rgba(250, 204, 21, 0.1);
    box-shadow: 0 0 4px 2px rgba(250, 204, 21, 0.08);
  }
  100% {
    background-color: transparent;
    box-shadow: none;
  }
}

svg[data-markmap] .node-new {
  animation: node-flash 12s ease-out forwards;
  border-radius: 4px;
  padding: 2px 6px;
  margin: -2px -6px;
  display: inline-block;
}

/* ── Parent-node highlight: subtle indicator showing which branch changed ── */
@keyframes parent-glow {
  0% {
    background-color: rgba(250, 204, 21, 0.25);
    box-shadow: 0 0 10px 4px rgba(250, 204, 21, 0.3);
  }
  15% {
    background-color: rgba(250, 204, 21, 0.18);
    box-shadow: 0 0 6px 3px rgba(250, 204, 21, 0.18);
  }
  50% {
    background-color: rgba(250, 204, 21, 0.08);
    box-shadow: 0 0 3px 1px rgba(250, 204, 21, 0.08);
  }
  100% {
    background-color: transparent;
    box-shadow: none;
  }
}

svg[data-markmap] .node-new-parent {
  animation: parent-glow 10s ease-out forwards;
  border-radius: 4px;
  padding: 2px 6px;
  margin: -2px -6px;
  display: inline-block;
}
